<div class="box">
  <%= form_tag psychologist_profiles_path, method: :get, class: "search-form" do %>

    <!-- Main Search Bar -->
    <div class="field has-addons mb-4">
      <div class="control is-expanded has-icons-left">
        <%= text_field_tag :search, params[:search],
              class: "input is-medium",
              placeholder: t('psychologist_search.placeholder') %>
        <span class="icon is-left">
          <i class="fas fa-search"></i>
        </span>
      </div>
      <div class="control">
        <button class="button is-primary-blue is-medium" type="submit">
          <span class="icon is-hidden-mobile">
            <i class="fas fa-search"></i>
          </span>
          <span class="is-hidden-tablet"><%= t('psychologist_search.search_button') %></span>
          <span class="is-hidden-mobile"><%= t('psychologist_search.search_button') %></span>
        </button>
      </div>
      <% if any_filters_active?(params) %>
        <div class="control">
          <%= link_to psychologist_profiles_path, class: "button is-primary-blue is-medium" do %>
            <span class="icon">
              <i class="fas fa-times"></i>
            </span>
            <span class="is-hidden-mobile"><%= t('psychologist_search.clear_all') %></span>
          <% end %>
        </div>
      <% end %>
    </div>

    <!-- Collapsible Filters Section - Hidden only on mobile -->
    <div class="block" x-data="{ showFilters: window.innerWidth > 768 }">
      <!-- Toggle button - hidden on tablet/desktop -->
      <button type="button"
              class="button is-light is-fullwidth is-justify-content-space-between is-hidden-tablet"
              @click="showFilters = !showFilters"
              x-show="!showFilters">
        <span>
          <span class="icon">
            <i class="fas fa-filter"></i>
          </span>
          <span><%= t('psychologist_search.filters') %></span>
        </span>
        <span class="icon">
          <i class="fas fa-chevron-down"></i>
        </span>
      </button>

      <!-- Filters content - always visible on desktop, toggleable on mobile -->
      <div x-show="showFilters" x-transition class="box mt-3">

        <!-- Primary Filters -->
        <div class="columns is-multiline">
          <!-- Specialties -->
          <div class="column is-6-tablet is-12-mobile">
            <div class="field">
              <label class="label"><%= t('psychologist_search.specialties_label') %></label>
              <div class="control">
                <%= select_tag :specialty_ids,
                      options_for_select(
                        Specialty.all.map { |s| [s.name, s.id] }, # Assuming Specialty.name is already translated or base
                        params[:specialty_ids]
                      ),
                      multiple: true,
                      class: "filter-select tom-select",
                      id: "specialties-select" %>
              </div>
            </div>
          </div>

          <!-- Issues -->
          <div class="column is-6-tablet is-12-mobile">
            <div class="field">
              <label class="label"><%= t('psychologist_search.issues_label') %></label>
              <div class="control">
                <%= select_tag :issue_ids,
                      options_for_select(
                        Issue.all.map { |i| [i.name, i.id] }, # Assuming Issue.name is already translated or base
                        params[:issue_ids]
                      ),
                      multiple: true,
                      class: "filter-select tom-select",
                      id: "issues-select" %>
              </div>
            </div>
          </div>

          <!-- Client Types -->
          <div class="column is-6-tablet is-12-mobile">
            <div class="field">
              <label class="label"><%= t('psychologist_search.client_types_label') %></label>
              <div class="control">
                <div class="select is-fullwidth">
                  <%= select_tag :client_type_id,
                                 options_for_select(
                                   [[t('psychologist_search.all_client_types'), '']] +
                                   ClientType.all.map { |i| [i.name, i.id] }, # Assuming ClientType.name is already translated or base
                                   params[:client_type_id]
                                 ),
                                 class: "select filter-select"
                                 %>
                </div>
              </div>
            </div>
          </div>

          <!-- Languages -->
          <div class="column is-6-tablet is-12-mobile">
            <div class="field">
              <label class="label"><%= t('psychologist_search.languages_label') %></label>
              <div class="control">
                <%= select_tag "language_ids",
                      options_from_collection_for_select(
                        Language.all.map { |l| [t("languages.#{l.name.downcase.gsub(' ', '_')}"), l.id] }, # Translate language names
                        :second, :first, selected: params[:language_ids]
                      ),
                      multiple: true,
                      class: "tom-select filter-select",
                      id: "languages-select",
                      data: { placeholder: t('psychologist_search.select_languages_placeholder') } %>
              </div>
            </div>
          </div>
        </div>

<!-- Delivery Method - CSS Only Version -->
<div class="delivery-method-container">
  <div class="field">
    <label class="label"><%= t('psychologist_search.delivery_method_label') %></label>
    <div class="field is-grouped is-grouped-multiline">
      <div class="control">
        <!-- Wrap the checkbox inside the label -->
        <label class="button delivery-method">
          <%= check_box_tag "in_person", "1", params[:in_person] == "1", class: "delivery-method-input" %>
          <span class="icon">
            <i class="fas fa-user"></i>
          </span>
          <span><%= t('psychologist_search.in_person') %></span>
        </label>
      </div>
      <div class="control">
        <label class="button delivery-method">
          <%= check_box_tag "online", "1", params[:online] == "1", class: "delivery-method-input" %>
          <span class="icon">
            <i class="fas fa-laptop"></i>
          </span>
          <span><%= t('psychologist_search.online') %></span>
        </label>
      </div>
    </div>
  </div>
</div>

<!-- Religion -->
<% safe_religions = @religions || [] %>

<div class="column is-6-tablet is-12-mobile">
  <div class="field">
    <label class="label"><%= t('psychologist_search.religion_label') %></label>
    <div class="control">
      <div class="select is-fullwidth">
        <%= select_tag :religion,
          options_for_select(
            [[t('psychologist_search.any_religion'), '']] +
            safe_religions.map { |r| [t("enums.religion.#{r.underscore}"), r] }, # Translate religion enum values
            params[:religion]
          ),
          class: "select" %>
      </div>
    </div>
  </div>
</div>


        <!-- Location Filters -->
        <div class="columns is-multiline">
          <div class="column is-6-tablet is-12-mobile">
            <div class="field">
              <label class="label"><%= t('psychologist_search.country_label') %></label>
              <div class="control">
                <div class="select is-fullwidth">
                    <%= select_tag :country,
                                   options_for_select(
                                     [[t('psychologist_search.all_countries'), '']] +
                                     countries_with_cities.map { |c| [t("countries.#{c['name'].downcase.gsub(' ', '_')}"), c['name']] }, # Translate country names
                                     params[:country]
                                   ),
                                   class: "select filter-select",
                                   id: "search-country",
                                   onchange: "updateCityFilter()" %>
                </div>
              </div>
            </div>
          </div>

          <div class="column is-6-tablet is-12-mobile">
            <div class="field">
              <label class="label"><%= t('psychologist_search.city_label') %></label>
              <div class="control">
                <div class="select is-fullwidth">
                  <%= select_tag :city,
                    options_for_select(
                      [[t('psychologist_search.all_cities'), '']],
                      params[:city]
                    ),
                    class: "select filter-select",
                    id: "search-city",
                    disabled: params[:country].blank? %>
                </div>
              </div>
            </div>
          </div>
        </div>

       <div class="columns is-multiline">
  <!-- Gender -->
  <div class="column is-6-tablet is-12-mobile">
    <div class="field">
      <label class="label"><%= t('psychologist_search.gender_label') %></label>
      <div class="control">
        <div class="select is-fullwidth">
          <%= select_tag :gender,
            options_for_select(
              [[t('psychologist_search.any_gender'), '']] +
              @genders.map { |g| [t("enums.gender.#{g}"), g] }, # Translate gender enum values
              params[:gender]
            ),
            class: "select" %>
        </div>
      </div>
    </div>
  </div>

  <!-- Price Range: Min / Max / Currency -->
  <div class="column is-6-tablet is-12-mobile">
    <div class="field">
      <label class="label"><%= t('psychologist_search.price_range_label') %></label>
      <div class="field has-addons">
        <!-- Min -->
        <div class="control is-expanded">
          <%= number_field_tag :min_rate, params[:min_rate],
              step: 1,
              class: "input",
              min: 0,
              placeholder: t('psychologist_search.min_rate_placeholder') %>
        </div>

        <!-- Max -->
        <div class="control is-expanded">
          <%= number_field_tag :max_rate, params[:max_rate],
              step: 1,
              class: "input",
              min: 0,
              placeholder: t('psychologist_search.max_rate_placeholder') %>
        </div>

        <!-- Currency Display Only -->
        <div class="control">
          <input class="input is-static has-text-weight-semibold" type="text" readonly value="  <%= current_currency %>">
        </div>
      </div>
    </div>
  </div>
</div>


        <!-- Apply Filters Button -->
        <div class="field">
          <div class="control">
            <button type="submit" class="button is-primary-blue is-fullwidth">
              <span class="icon">
                <i class="fas fa-check"></i>
              </span>
              <span><%= t('psychologist_search.apply_filters_button') %></span>
            </button>
          </div>
        </div>

      </div>
    </div>
  <% end %>
</div>

<style>
  @media screen and (min-width: 769px) {
    [x-cloak] {
      display: block !important;
    }

    .filter-section {
      display: block !important;
    }
  }

  @media screen and (max-width: 768px) {
    .box {
      margin: 0.5rem;
      padding: 1rem;
    }

    .field.has-addons .control:not(:last-child) .button,
    .field.has-addons .control:not(:last-child) .input {
      border-radius: 4px 0 0 4px;
    }

    .field.has-addons .control:last-child .button,
    .field.has-addons .control:last-child .input {
      border-radius: 0 4px 4px 0;
    }

    .tags .tag {
      margin-bottom: 0.25rem;
    }

    .button.is-fullwidth {
      justify-content: space-between;
    }
  }

  .field:not(:last-child) {
    margin-bottom: 1rem;
  }
</style>



<!-- Psychologist Profiles -->
<div class="profiles-container">
  <% @psychologist_profiles.each do |profile| %>
    <div class="profile-card box mb-4">
      <div class="columns is-mobile">
        <!-- Profile Image -->
        <div class="column is-2-desktop is-3-tablet is-4-mobile profile-img-container has-text-centered">
          <figure class="image is-96x96 mx-auto">
            <% if profile.profile_img.attached? %>
              <%= image_tag profile.profile_img.variant(resize_to_limit: [96, 96]), class: "is-rounded"%>
            <% else %>
              <img src="/assets/default-profile.png" alt="Default Profile" class="is-rounded profile-image">
            <% end %>
          </figure>
        </div>

        <!-- Profile Info -->
        <div class="column profile-info">
          <div class="columns is-mobile">
            <div class="column">
              <!-- Name and Badges -->
              <h3 class="title is-5 mb-1">
                <% if profile.is_doctor %><%= t('psychologist_search.phd_badge') %> <% end %><%= profile.first_name %> <%= profile.last_name %>
              </h3>

              <!-- Qualifications and Rate -->
              <div class="mb-2">
                <% if profile.standard_rate.present? %>
                  <span class="tag is-light">
                    <i class="fas fa-money-bill-wave mr-1">
                    </i> <% converted = profile.converted_rate(current_currency) %>
<%= humanized_money_with_symbol(converted) %>

                  </span>
                <% end %>
                <% if profile.is_doctor %>
                  <span class="tag is-primary is-light ml-1">
                    <i class="fas fa-user-md mr-1"></i> <%= t('psychologist_search.phd_badge') %>
                  </span>
                <% end %>
                <% if profile.is_degree_boolean %>
                  <span class="tag is-info is-light ml-1">
                    <i class="fas fa-certificate mr-1"></i> <%= t('psychologist_search.certified_badge') %>
                  </span>
                <% end %>
              </div>

              <!-- Location and Experience -->
              <% if profile.city.present? || profile.country.present? || profile.years_of_experience.present? %>
                <p class="location-text mb-2">
                  <% if profile.city.present? || profile.country.present? %>
                    <span class="icon is-small"><i class="fas fa-map-marker-alt"></i></span>
                    <%= [profile.city.present? ? t("cities.#{profile.city.downcase.gsub('-', '_')}") : nil, # Translate city
                         profile.country.present? ? t("countries.#{profile.country.downcase.gsub(' ', '_')}") : nil # Translate country
                        ].compact.join(", ") %>
                  <% end %>
                  <% if profile.years_of_experience.present? %>
                    <span class="ml-2"><i class="fas fa-clock"></i> <%= t('psychologist_profiles.show.years_experience_short', count: profile.years_of_experience) %></span>
                  <% end %>
                </p>
              <% end %>

              <!-- Short Bio -->
              <% if profile.about_me.present? %>
                <p class="has-text-grey is-size-7 mb-2">
                  <%= truncate(profile.about_me, length: 150) %>
                </p>
              <% end %>

              <!-- Specialties and Issues Tags -->
              <% if profile.specialties.any? || profile.issues.any? %>
                <div class="tags are-small mt-2">
                  <% profile.specialties.each do |specialty| %>
                    <span class="tag is-info is-light"><%= specialty.name %></span>
                  <% end %>
                  <% profile.issues.each do |issue| %>
                    <span class="tag is-warning is-light"><%= issue.name %></span>
                  <% end %>
                </div>
              <% end %>

              <!-- Client Types -->
              <% if profile.client_types.any? %>
                <p class="is-size-7 has-text-grey mt-2">
                  <span class="icon is-small"><i class="fas fa-users"></i></span>
                  <%= profile.client_types.map(&:name).join(" â€¢ ") %>
                </p>
              <% end %>
            </div>

            <!-- Languages Tags (moved to match common structure) -->
            <% if profile.languages.any? %>
              <div class="tags are-small mt-2">
                <% profile.languages.each do |language| %>
                  <span class="tag is-info is-light"><%= t("languages.#{language.name.downcase.gsub(' ', '_')}") %></span>
                <% end %>
              </div>
            <% end %>

            <!-- Contact Information (right side) -->
            <div class="column is-narrow">
              <div class="buttons are-small is-flex is-flex-direction-column">
                <%= link_to psychologist_profile_path(profile), class: "button is-primary is-outlined mb-2" do %>
                  <span class="icon is-small"><i class="fas fa-user"></i></span>
                  <span><%= t('psychologist_search.view_profile_button') %></span>
                <% end %>

                <button class="button is-text contact-button" data-target="contact-<%= profile.id %>">
                  <span class="icon is-small"><i class="fas fa-envelope"></i></span>
                  <span><%= t('psychologist_search.contact_button') %></span>
                </button>
              </div>

              <!-- Contact Icons -->
              <div class="contact-icons mt-2">
                <% if profile.contact_phone.present? %>
                  <a href="tel:<%= profile.contact_phone %>" class="is-primary-blue mr-1" title="Phone">
                    <span class="icon"><i class="fas fa-phone"></i></span>
                  </a>
                <% end %>

                <% if profile.user.email.present? %>
                  <a href="mailto:<%= profile.user.email %>" class="is-primary-blue mr-1" title="Email">
                    <span class="icon"><i class="fas fa-envelope"></i></span>
                  </a>
                <% end %>

                <% if profile.telegram.present? %>
                  <a href="https://t.me/<%= profile.telegram %>" target="_blank" class="is-primary-blue mr-1" title="Telegram">
                    <span class="icon"><i class="fab fa-telegram"></i></span>
                  </a>
                <% end %>

                <% if profile.whatsapp.present? %>
                  <a href="https://wa.me/<%= profile.whatsapp %>" target="_blank" class="is-primary-blue" title="WhatsApp">
                    <span class="icon"><i class="fab fa-whatsapp"></i></span>
                  </a>
                <% end %>
              </div>

              <!-- Hidden Contact Info -->
              <div id="contact-<%= profile.id %>" class="contact-info mt-2" style="display: none;">
                <% if profile.contact_phone.present? %>
                  <p class="is-size-7">
                    <span class="icon is-small"><i class="fas fa-phone"></i></span>
                    <a href="tel:<%= profile.contact_phone %>"><%= profile.contact_phone %></a>
                  </p>
                <% end %>

                <% if profile.user.email.present? %>
                  <p class="is-size-7">
                    <span class="icon is-small"><i class="fas fa-envelope"></i></span>
                    <a href="mailto:<%= profile.user.email %>"><%= profile.user.email %></a>
                  </p>
                <% end %>

                <% if profile.telegram.present? %>
                  <p class="is-size-7">
                    <span class="icon is-small"><i class="fab fa-telegram"></i></span>
                    <a href="https://t.me/<%= profile.telegram %>" target="_blank">@<%= profile.telegram %></a>
                  </p>
                <% end %>

                <% if profile.whatsapp.present? %>
                  <p class="is-size-7">
                    <span class="icon is-small"><i class="fab fa-whatsapp"></i></span>
                    <a href="https://wa.me/<%= profile.whatsapp %>" target="_blank"><%= profile.whatsapp %></a>
                  </p>
                <% end %>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  <% end %>
</div>
<style>
  .delivery-method .delivery-method-input {
    position: absolute;
    opacity: 0;
  }

  .delivery-method {
    background-color: white;
    border: 1px solid #dbdbdb;
    color: #363636;
    padding: 0.5rem 1rem;
    cursor: pointer;
    border-radius: 4px;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    transition: all 0.2s ease;
  }

  .delivery-method:has(.delivery-method-input:checked) {
    background-color: #485fc7; /* Bulma's primary color */
    border-color: #485fc7;
    color: white;
  }

  /* More specific targeting for checked state - only delivery method */
  .delivery-method .delivery-method-input:checked ~ .icon,
  .delivery-method .delivery-method-input:checked ~ span {
    color: white;
  }

  /* Hover effect - only delivery method */
  .delivery-method:hover {
    border-color: #b5b5b5;
  }

  /* Focus effect - only delivery method */
  .delivery-method:focus-within {
    box-shadow: 0 0 0 0.125em rgba(72, 95, 199, 0.25);
  }

  /* Basic field styling - scoped to delivery method container only */
  .delivery-method-container .field {
    margin-bottom: 1rem;
  }

  .delivery-method-container .label {
    display: block;
    font-weight: 600;
    margin-bottom: 0.5rem;
    color: #363636;
  }

  .delivery-method-container .is-grouped {
    display: flex;
    gap: 0.5rem;
  }

  .delivery-method-container .control {
    display: flex;
    align-items: center;
  }
</style>


<style>
  :root {
    --primary-blue: #007bff;
    --text-primary: #2c3e50;
    --text-secondary: #6c757d;
    --border-light: #e9ecef;
    --bg-light: #f8f9fa;
    --white: #ffffff;
    --shadow-subtle: 0 2px 4px rgba(0,0,0,0.05);
    --shadow-card: 0 4px 12px rgba(0,0,0,0.08);
    
    --color-education: #374151;
    --color-time: grey;
    --color-location: #374151;
    --color-doctor: #059669;
    --color-certified: #f59e0b;
    --color-timezone: #06b6d4;
    --color-about: #8b5cf6;
    --color-experience: #374151;
    --color-specialization: #f59e0b;
    --color-clients: #06b6d4;
    --color-issues: #ef4444;
    --color-services: #374151;
    --color-contact: #6366f1;
    --color-price: #059669;
    --color-duration: grey;
    --color-email: #6366f1;
    --color-telegram: #0088cc;
    --color-whatsapp: #25d366;
    --color-phone: #374151;
  }

  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background-color: var(--bg-light);
    color: var(--text-primary);
    line-height: 1.6;
  }

  .profile-container {
    max-width: 900px;
    margin: 0 auto;
    padding: 20px;
  }

  .profile-card {
    background: var(--white);
    border-radius: 12px;
    box-shadow: var(--shadow-card);
    border: 1px solid var(--border-light);
    overflow: hidden;
  }

  .icon-education { color: var(--color-education) !important; }
  .icon-time { color: var(--color-time) !important; }
  .icon-location { color: var(--color-location) !important; }
  .icon-doctor { color: var(--color-doctor) !important; }
  .icon-certified { color: var(--color-certified) !important; }
  .icon-timezone { color: var(--color-timezone) !important; }
  .icon-about { color: var(--color-about) !important; }
  .icon-experience { color: var(--color-experience) !important; }
  .icon-specialization { color: var(--color-specialization) !important; }
  .icon-clients { color: var(--color-clients) !important; }
  .icon-issues { color: var(--color-issues) !important; }
  .icon-services { color: var(--color-services) !important; }
  .icon-contact { color: var(--color-contact) !important; }
  .icon-price { color: var(--color-price) !important; }
  .icon-duration { color: var(--color-duration) !important; }
  .icon-email { color: var(--color-email) !important; }
  .icon-telegram { color: var(--color-telegram) !important; }
  .icon-whatsapp { color: var(--color-whatsapp) !important; }
  .icon-phone { color: var(--color-phone) !important; }

  .profile-header {
    padding: 40px 30px;
    background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
    border-bottom: 1px solid var(--border-light);
    position: relative;
  }

  .header-actions {
    position: absolute;
    top: 20px;
    right: 20px;
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
  }

  .profile-info {
    display: flex;
    align-items: flex-start;
    gap: 25px;
    margin-top: 20px;
  }

  .profile-avatar .image {
    margin: 0;
  }

  .profile-avatar img {
    border: 3px solid var(--white);
    box-shadow: var(--shadow-subtle);
  }

  .profile-details {
    flex: 1;
  }

  .profile-name {
    font-size: 2rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 12px;
    line-height: 1.2;
  }

  .profile-credentials {
    display: flex;
    gap: 12px;
    margin-bottom: 16px;
    flex-wrap: wrap;
  }

  .credential-tag {
    background: var(--bg-light);
    border: 1px solid var(--border-light);
    border-radius: 20px;
    padding: 6px 12px;
    font-size: 0.85rem;
    color: var(--text-secondary);
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .profile-badges {
    display: flex;
    gap: 16px;
    margin-bottom: 16px;
    flex-wrap: wrap;
  }

  .badge-item {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 0.9rem;
    color: var(--text-secondary);
  }

  .profile-location {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.9rem;
    color: var(--text-secondary);
  }


  .profile-section {
    padding: 30px;
    border-bottom: 1px solid var(--border-light);
  }

  .profile-section:last-child {
    border-bottom: none;
  }

  .section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
  }

  .section-title {
    font-size: 1.3rem;
    font-weight: 600;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 20px;
  }

  .section-title i {
    font-size: 1.1rem;
  }

  .section-content {
    color: var(--text-secondary);
    line-height: 1.7;
  }

  .section-description {
    margin-bottom: 20px;
    color: var(--text-secondary);
  }


  .experience-item {
    padding: 20px;
    background: var(--bg-light);
    border-radius: 8px;
    border-left: 4px solid var(--color-experience);
  }

  .experience-header h3 {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 4px;
  }

  .experience-type {
    font-size: 0.9rem;
    color: var(--text-secondary);
  }


  .tags-container {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }

  .tag-item {
    background: var(--bg-light);
    border: 1px solid var(--border-light);
    border-radius: 16px;
    padding: 8px 16px;
    font-size: 0.85rem;
    color: var(--text-secondary);
    transition: all 0.2s ease;
  }

  .tag-item:hover {
    background: var(--primary-blue);
    color: var(--white);
    border-color: var(--primary-blue);
  }

  .tag-item.featured {
    background: rgba(245, 158, 11, 0.1);
    border-color: var(--color-specialization);
    color: var(--color-specialization);
  }


  .services-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
  }

  .service-card {
    background: var(--white);
    border: 1px solid var(--border-light);
    border-radius: 8px;
    padding: 20px;
    transition: all 0.2s ease;
  }

  .service-card:hover {
    box-shadow: var(--shadow-card);
    border-color: var(--primary-blue);
  }

  .service-title {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 12px;
  }

  .service-meta {
    display: flex;
    gap: 16px;
    margin-bottom: 12px;
  }

  .service-price,
  .service-duration {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 0.85rem;
    color: var(--text-secondary);
  }

  .service-delivery {
    margin-bottom: 16px;
  }

  .delivery-badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 4px 12px;
    border-radius: 12px;
    font-size: 0.8rem;
    font-weight: 500;
  }

  .delivery-badge.online {
    background: rgba(6, 182, 212, 0.1);
    color: var(--color-clients);
  }

  .delivery-badge.in-person {
    background: rgba(5, 150, 105, 0.1);
    color: var(--color-doctor);
  }

  .service-description {
    color: var(--text-secondary);
    font-size: 0.9rem;
    margin-bottom: 20px;
  }

.primary-contact {
  margin-bottom: 20px;
  display: flex;
  justify-content: center;
  align-items: center;
}

.contact-cta {
  display: flex;           
  width: 100%;             
  justify-content: center;
  align-items: center;
  gap: 12px;
  background: var(--primary-blue);
  color: var(--white);
  padding: 12px 24px;
  border-radius: 8px;
  text-decoration: none;
  font-weight: 500;
  transition: all 0.2s ease;
}



  .contact-cta:hover {
    background: #0056b3;
    color: var(--white);
    transform: translateY(-1px);
  }

.toggle-contacts {
  background: none;
  border: none;
  color: var(--primary-blue);
  font-size: 0.9rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 0;
  margin-bottom: 16px;
  width: 100%;          
  min-width: 0;          
  justify-content: center;
}

  .toggle-contacts:hover {
    text-decoration: underline;
  }

  .contact-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .contact-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px;
    background: var(--bg-light);
    border-radius: 8px;
    border: 1px solid var(--border-light);
  }

  .contact-info {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .contact-info i {
    width: 16px;
  }

  .contact-label {
    font-size: 0.9rem;
    color: var(--text-secondary);
    min-width: 80px;
  }

  .contact-actions {
    display: flex;
    gap: 8px;
    align-items: center;
  }

  .contact-input {
    background: var(--white);
    border: 1px solid var(--border-light);
    border-radius: 4px;
    padding: 6px 8px;
    font-size: 0.85rem;
    color: var(--text-primary);
    width: 200px;
  }

  .copy-button,
  .contact-link {
    background: var(--white);
    border: 1px solid var(--border-light);
    border-radius: 4px;
    padding: 6px 8px;
    color: var(--text-secondary);
    text-decoration: none;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .copy-button:hover,
  .contact-link:hover {
    background: var(--primary-blue);
    color: var(--white);
    border-color: var(--primary-blue);
  }

  .empty-text {
    color: var(--text-secondary);
    font-style: italic;
    font-size: 0.9rem;
  }

  .button.is-primary-blue {
    background-color: var(--white);
    border: 1px solid var(--primary-blue);
    color: var(--primary-blue);
    box-shadow: none;
    font-weight: 500;
    border-radius: 6px;
  }

  .button.is-primary-blue:hover,
  .button.is-primary-blue.is-hovered {
    background-color: var(--primary-blue);
    border-color: var(--primary-blue);
    color: var(--white);
  }

  .button.is-primary-blue:focus,
  .button.is-primary-blue.is-focused {
    background-color: var(--primary-blue);
    border-color: var(--primary-blue);
    color: var(--white);
    box-shadow: 0 0 0 0.125em rgba(0, 123, 255, 0.25);
  }


  @media screen and (max-width: 768px) {
    .profile-container {
      padding: 10px;
    }
    
    .profile-header {
      padding: 20px;
    }
    
    .header-actions {
      position: static;
      margin-bottom: 20px;
      justify-content: flex-start;
    }
    
    .profile-info {
      flex-direction: column;
      align-items: center;
      text-align: center;
      gap: 20px;
    }
    
    .profile-name {
      font-size: 1.5rem;
    }
    
    .profile-section {
      padding: 20px;
    }
    
    .section-header {
      flex-direction: column;
      align-items: flex-start;
      gap: 12px;
    }
    
    .services-grid {
      grid-template-columns: 1fr;
    }
    
    .service-meta {
      flex-direction: column;
      gap: 8px;
    }
    
    .contact-item {
      flex-direction: column;
      gap: 12px;
      align-items: flex-start;
    }
    
    .contact-input {
      width: 100%;
    }
    
    .contact-actions {
      width: 100%;
      justify-content: space-between;
    }
    
    .profile-badges {
      flex-direction: column;
      gap: 8px;
    }
    
    .credential-tag {
      font-size: 0.8rem;
    }

    
  }
    .video-wrapper {
    margin-top: 1rem;
    position: relative;
    padding-bottom: 56.25%; 
    height: 0;
    overflow: hidden;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  .video-wrapper iframe {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
  }

.availability-banner {
  background: linear-gradient(135deg, var(--bg-light) 0%, var(--white) 100%);
  border: 2px solid var(--border-light);
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 24px;
  box-shadow: var(--shadow-subtle);
  transition: all 0.3s ease;
}

.availability-banner:hover {
  box-shadow: var(--shadow-card);
  border-color: var(--primary-blue);
}

.availability-content {
  display: flex;
  align-items: center;
  gap: 16px;
}

.availability-icon {
  background: var(--primary-blue);
  color: var(--white);
  width: 48px;
  height: 48px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.2rem;
  flex-shrink: 0;
  box-shadow: var(--shadow-subtle);
}

.availability-info {
  flex: 1;
}

.availability-status.available .availability-icon {
  background: var(--color-doctor);
}

.availability-status.unavailable .availability-icon {
  background: var(--text-secondary);
}

.availability-label {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 0.9rem;
  color: var(--text-secondary);
  margin-bottom: 4px;
  font-weight: 500;
}

.availability-details {
  display: flex;
  align-items: center;
  gap: 16px;
  flex-wrap: wrap;
}

.availability-time {
  font-size: 1.1rem;
  font-weight: 700;
  color: var(--text-primary);
}

.availability-timezone {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 0.85rem;
  color: var(--text-secondary);
  background: var(--bg-light);
  padding: 4px 8px;
  border-radius: 12px;
  border: 1px solid var(--border-light);
}

.availability-message {
  font-size: 0.85rem;
  color: var(--text-secondary);
  margin-top: 2px;
  font-style: italic;
}

@media screen and (max-width: 768px) {
  .availability-content {
    flex-direction: column;
    text-align: center;
    gap: 12px;
  }
  
  .availability-details {
    flex-direction: column;
    gap: 8px;
  }
  
  .availability-banner {
    padding: 16px;
  }
} 
</style>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const toggleButton = document.querySelector('.toggle-contacts');
  if (toggleButton) {
    toggleButton.addEventListener('click', function() {
      const contactList = document.querySelector('.contact-list');
      const isExpanded = this.getAttribute('aria-expanded') === 'true';
      
      this.setAttribute('aria-expanded', !isExpanded);
      this.querySelector('.toggle-text').textContent = isExpanded ? 'Show all contact methods' : 'Hide contact methods';
      this.querySelector('i').classList.toggle('fa-chevron-down');
      this.querySelector('i').classList.toggle('fa-chevron-up');
      contactList.style.display = isExpanded ? 'none' : 'flex';
    });
  }

  document.querySelectorAll('.copy-button').forEach(button => {
    button.addEventListener('click', async (event) => {
      const valueToCopy = event.currentTarget.dataset.value;
      const icon = event.currentTarget.querySelector('i');
      
      try {
        if (navigator.clipboard && navigator.clipboard.writeText) {
          await navigator.clipboard.writeText(valueToCopy);
        } else {
          // Fallback for older browsers
          const textarea = document.createElement('textarea');
          textarea.value = valueToCopy;
          textarea.style.position = 'fixed';
          textarea.style.opacity = '0';
          document.body.appendChild(textarea);
          textarea.focus();
          textarea.select();
          document.execCommand('copy');
          document.body.removeChild(textarea);
        }

        // Visual feedback
        const originalClass = icon.className;
        icon.className = 'fas fa-check';
        
        setTimeout(() => {
          icon.className = originalClass;
        }, 1500);

      } catch (err) {
        console.error('Failed to copy text: ', err);
      }
    });
  });
});
</script>