<div class="box p-5" style="border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);">
  <%= form_with(model: internal_client_profile) do |form| %>
    <% if internal_client_profile.errors.any? %>
      <div class="notification is-danger is-light" style="border-radius: 6px;">
        <button class="delete"></button>
        <p class="title is-6"><%= pluralize(internal_client_profile.errors.count, "error") %> prohibited this internal client profile from being saved:</p>
        <ul>
          <% internal_client_profile.errors.each do |error| %>
            <li><%= error.full_message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="field">
      <%= form.label :internal_reference_number, class: "label" %>
      <div class="control">
        <%= form.text_field :internal_reference_number, class: "input is-rounded", placeholder: "e.g., PSY001" %>
      </div>
    </div>

    <div class="columns is-multiline">
      <div class="column is-half">
        <div class="field">
          <%= form.label :first_name, class: "label" %>
          <div class="control">
            <%= form.text_field :first_name, class: "input is-rounded", placeholder: "First Name" %>
          </div>
        </div>
      </div>
      <div class="column is-half">
        <div class="field">
          <%= form.label :last_name, class: "label" %>
          <div class="control">
            <%= form.text_field :last_name, class: "input is-rounded", placeholder: "Last Name" %>
          </div>
        </div>
      </div>
    </div>

    <div class="columns is-multiline">
      <div class="column is-half">
        <div class="field">
          <%= form.label :phone_number1, class: "label" %>
          <div class="control">
            <%= form.text_field :phone_number1, class: "input is-rounded", placeholder: "Primary Phone" %>
          </div>
        </div>
      </div>
      <div class="column is-half">
        <div class="field">
          <%= form.label :phone_number2, class: "label" %>
          <div class="control">
            <%= form.text_field :phone_number2, class: "input is-rounded", placeholder: "Secondary Phone (Optional)" %>
          </div>
        </div>
      </div>
    </div>

    <div class="columns is-multiline">
      <div class="column is-half">
        <div class="field">
          <%= form.label :telegram, class: "label" %>
          <div class="control">
            <%= form.text_field :telegram, class: "input is-rounded", placeholder: "Telegram Username" %>
          </div>
        </div>
      </div>
      <div class="column is-half">
        <div class="field">
          <%= form.label :whatsapp, class: "label" %>
          <div class="control">
            <%= form.text_field :whatsapp, class: "input is-rounded", placeholder: "WhatsApp Number" %>
          </div>
        </div>
      </div>
    </div>

    <div class="columns is-multiline">
      <div class="column is-half">
        <div class="field">
          <%= form.label :gender, class: "label" %>
          <div class="control">
            <div class="select is-rounded is-fullwidth">
              <%= form.select :gender, options_for_select(['Male', 'Female', 'Non-binary', 'Prefer not to say'], internal_client_profile.gender), { include_blank: 'Select Gender' }, class: "input" %>
            </div>
          </div>
        </div>
      </div>
      <div class="column is-half">
        <div class="field">
          <%= form.label :dob, class: "label" %>
          <div class="control">
            <%= form.date_field :dob, class: "input is-rounded" %>
          </div>
        </div>
      </div>
    </div>

    <div class="columns is-multiline">
      <div class="column is-one-third">
        <div class="field">
          <%= form.label :country, class: "label" %>
          <div class="control">
            <%= form.text_field :country, class: "input is-rounded", placeholder: "Country" %>
          </div>
        </div>
      </div>
      <div class="column is-one-third">
        <div class="field">
          <%= form.label :city, class: "label" %>
          <div class="control">
            <%= form.text_field :city, class: "input is-rounded", placeholder: "City" %>
          </div>
        </div>
      </div>

    </div>

    <div class="field">
      <%= form.label :preferred_contact_method, class: "label" %>
      <div class="control">
        <div class="select is-rounded is-fullwidth">
          <%= form.select :preferred_contact_method, options_for_select(['Phone', 'Email', 'Telegram', 'WhatsApp'], internal_client_profile.preferred_contact_method), { include_blank: 'Select Preferred Method' }, class: "input" %>
        </div>
      </div>
    </div>


    <hr> <p class="title is-6 has-text-grey-darker mb-4">Clinical Information</p>

    <div class="field">
      <%= form.label :reason_for_referral, class: "label" %>
      <div class="control">
        <%= form.text_area :reason_for_referral, class: "textarea is-rounded", placeholder: "Reason for referral", rows: 3 %>
      </div>
    </div>

    <div class="field">
      <div class="control">
        <label class="checkbox">
          <%= form.check_box :first_time_therapy %>
          First time in therapy?
        </label>
      </div>
    </div>

    <div class="field">
      <%= form.label :status, class: "label" %>
      <div class="control">
        <div class="select is-rounded is-fullwidth">
          <%= form.select :status, options_for_select([['Active', 1], ['Inactive', 0], ['On Hold', 2]], internal_client_profile.status), { include_blank: 'Select Status' }, class: "input" %>
        </div>
      </div>
    </div>

    <div class="field is-grouped is-grouped-centered mt-5">
      <div class="control">
        <%= form.submit "Save Profile", class: "button is-primary is-rounded" %>
      </div>
      <div class="control">
        <%= link_to "Cancel", internal_client_profiles_path, class: "button is-light is-rounded" %>
      </div>
    </div>
  <% end %>
</div>
